<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Reggae+One&display=swap" rel="stylesheet">
    <title>Dashboard</title>
</head>
<body>
    <header>
        <h1 class="logo">BearHost</h1>
        <div class="account">
            <h1 id="welcomeback">Welcome back, <span id="username-display">–ì–æ—Å—Ç—å</span>!</h1>
        </div>
        <select class="change-lang" onchange="setLanguageDash(this.value)">
            <option value="ru">–†—É—Å—Å–∫–∏–πüá∑üá∫</option>
            <option value="en" selected>Englishüá¨üáß</option>
            <option value="es">Espa√±olüá™üá∏</option>

        </select>
        <div class="log-out">
            <button id="settings-btn" style="display: none;" onclick="location.href='settings.html'">Settings</button>
        </div>
        
    </header>

    <div class="wrapper">
        <h1 id="servercontrol">Server Control</h1>
        <div class="control-panel">
            <button id="startServerBtn">Start</button>
            <button class="restart" id="restartServerBtn">Restart</button>
            <button class="danger" id="stopServerBtn">Stop</button>
        </div>
    </div>

    <script>
        document.getElementById('startServerBtn').addEventListener('click', function() {
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä –¥–ª—è –∑–∞–ø—É—Å–∫–∞ Minecraft
            fetch('http://192.168.105.5:3000/start-server', {
                method: 'POST'
            })
            .then(response => {
                if (response.ok) {
                    alert('The server is starting...');
                } else {
                    alert('Error... Look in the console');
                }
            })
            .catch(error => {
            console.error('Error:', error);
            alert('An error has occurred...');
        });
            
        });

        document.getElementById('restartServerBtn').addEventListener('click', () => {
    fetch('http://192.168.105.5:3000/restart-server', { method: 'POST' })
        .then(response => response.text())
        .then(data => {
            alert(data);
        })
        .catch(error => {
            console.error('Error:', error);
            alert('An error has occurred...');
        });
});

        document.getElementById('stopServerBtn').addEventListener('click', function() {
            fetch('http://192.168.105.5:3000/stop-server', {
                method: 'POST'
            })
            .then(response => {
                if (response.ok) {
                    alert('Server stopped!');
                } else {
                    alert('An error occurred when stopping the server');
                }
            })
            .catch(error => {
            console.error('Error:', error);
            alert('An error occurred when stopping the server...');
            });
        });
    </script>

    
    <script>
        // –ü—Ä–æ–≤–µ—Ä–∫–∞, –≤–æ—à—ë–ª –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
        const loggedInUser = localStorage.getItem('loggedInUser');
        
        if (loggedInUser) {
            // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–æ—à—ë–ª, –≤—ã–≤–æ–¥–∏–º –µ–≥–æ –∏–º—è –≤ header
            document.getElementById('username-display').textContent = loggedInUser;
            document.getElementById('settings-btn').style.display = 'inline'; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É "–ù–∞—Å—Ç—Ä–æ–π–∫–∏"
        } else {
            // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤–æ—à—ë–ª, –æ—Å—Ç–∞–≤–ª—è–µ–º "–ì–æ—Å—Ç—å"
            document.getElementById('username-display').textContent = '?';
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã—Ö–æ–¥–∞ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
        // document.getElementById('logout-btn').addEventListener('click', function() {
        //     localStorage.removeItem('loggedInUser'); // –£–¥–∞–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–æ—à–µ–¥—à–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
        //     window.location.reload(); // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É
        //     window.location.href = 'login.html';
        // });
    </script>
    <script src="script.js"></script>
</body>
</html>